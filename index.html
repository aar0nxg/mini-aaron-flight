<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Doggoâ€™s Journey to Chandrima</title>
  <style>
    body {
      background: black;
      color: white;
      text-align: center;
      font-family: monospace;
    }
    canvas {
      display: block;
      margin: 20px auto;
      background: #111;
      border: 2px solid white;
    }
  </style>
</head>
<body>
  <h1>ðŸš€ Doggoâ€™s Journey to Chandrima ðŸ’–</h1>
  <p>Press <b>SPACE</b> to fly up. Reach Chandrima without crashing!</p>
  <canvas id="gameCanvas" width="800" height="600"></canvas>

  <script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");

    // Load images
    const doggoImg = new Image();
    doggoImg.src = "doggo.png";
    const chandrimaImg = new Image();
    chandrimaImg.src = "chandrima.png";
    const hugImg = new Image();
    hugImg.src = "hug.png";

    const meteorImg = new Image();
    meteorImg.src = "meteor.png";
    const birdImg = new Image();
    birdImg.src = "bird.png";
    const satelliteImg = new Image();
    satelliteImg.src = "satellite.png";
    const cloudImg = new Image();
    cloudImg.src = "cloud.png";
    const gustImg = new Image();
    gustImg.src = "gust.png";

    // Player
    const player = {
      x: 100,
      y: 300,
      width: 40,
      height: 40,
      velocityY: 0
    };

    let gravity = 0.4;
    let thrust = -8;
    let isSpacePressed = false;

    // Obstacles
    const obstacles = [];
    const obstacleTypes = ["meteor", "bird", "satellite", "cloud", "gust"];

    function spawnObstacle() {
      const type = obstacleTypes[Math.floor(Math.random() * obstacleTypes.length)];
      const size = Math.floor(Math.random() * 40) + 30;
      const y = Math.floor(Math.random() * (canvas.height - size));
      const speed = Math.random() * 3 + 2;
      obstacles.push({ x: canvas.width, y, width: size, height: size, type, speed });
    }

    setInterval(spawnObstacle, 2000);

    // Goal (Chandrima)
    const goal = {
      x: canvas.width - 100,
      y: canvas.height / 2 - 40,
      width: 60,
      height: 80
    };

    let gameOver = false;
    let gameWon = false;

    function update() {
      if (gameOver || gameWon) return;

      // Player physics
      if (isSpacePressed) player.velocityY = thrust;
      player.velocityY += gravity;
      player.y += player.velocityY;

      if (player.y + player.height > canvas.height) {
        player.y = canvas.height - player.height;
        player.velocityY = 0;
      }
      if (player.y < 0) {
        player.y = 0;
        player.velocityY = 0;
      }

      // Move obstacles
      for (let o of obstacles) {
        o.x -= o.speed;
        if (checkCollision(player, o)) gameOver = true;
      }

      // Win condition
      if (checkCollision(player, goal)) gameWon = true;
    }

    function checkCollision(a, b) {
      return (
        a.x < b.x + b.width &&
        a.x + a.width > b.x &&
        a.y < b.y + b.height &&
        a.y + a.height > b.y
      );
    }

    function render() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Draw player
      ctx.drawImage(doggoImg, player.x, player.y, player.width, player.height);

      // Draw obstacles
      for (let o of obstacles) {
        let img;
        switch (o.type) {
          case "meteor": img = meteorImg; break;
          case "bird": img = birdImg; break;
          case "satellite": img = satelliteImg; break;
          case "cloud": img = cloudImg; break;
          case "gust": img = gustImg; break;
        }
        ctx.drawImage(img, o.x, o.y, o.width, o.height);
      }

      // Draw goal
      ctx.drawImage(chandrimaImg, goal.x, goal.y, goal.width, goal.height);

      // End states
      if (gameOver) {
        ctx.fillStyle = "red";
        ctx.font = "40px monospace";
        ctx.fillText("ðŸ’¥ Crash! Try Again ðŸ’¥", 220, 300);
      }
      if (gameWon) {
        ctx.drawImage(hugImg, 200, 150, 400, 300);
        ctx.fillStyle = "#ffb6c1";
        ctx.font = "32px monospace";
        ctx.fillText("Doggo & Chandrima Hug Forever ðŸ’–", 150, 500);
      }
    }

    function gameLoop() {
      update();
      render();
      requestAnimationFrame(gameLoop);
    }

    // Controls
    document.addEventListener("keydown", e => {
      if (e.code === "Space") isSpacePressed = true;
    });
    document.addEventListener("keyup", e => {
      if (e.code === "Space") isSpacePressed = false;
    });

    gameLoop();
  </script>
</body>
</html>

